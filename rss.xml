<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Anton's blog, Azure cloud and all things infrastructure related]]></title><description><![CDATA[My insights, analysis and tips to share with dev community]]></description><link>https://blog.anton-it.dev</link><generator>GatsbyJS</generator><lastBuildDate>Mon, 16 Nov 2020 16:47:27 GMT</lastBuildDate><item><title><![CDATA[How does a single VM performance compare to multiple VMs? (Windows Server/IIS)]]></title><description><![CDATA[Having you ever wondered if 2 VMs would provide the same level of performance in IIS as a single VM of double the size? The following analysis will attempt to answer the question.]]></description><link>https://blog.anton-it.dev/posts/how-does-a-single-vm-performance-compare-to-multiple-vms-in-iis</link><guid isPermaLink="false">https://blog.anton-it.dev/posts/how-does-a-single-vm-performance-compare-to-multiple-vms-in-iis</guid><pubDate>Fri, 18 Sep 2020 22:40:32 GMT</pubDate><content:encoded>&lt;p&gt;Having you ever wondered if 2 VMs would provide the same level of performance in IIS as a single VM of double the size? The following analysis will attempt to answer the question.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#the-argument-for-multiple-vm-instances&quot;&gt;The argument for multiple VM instances&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#infrastructure-setup&quot;&gt;Infrastructure setup&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#performance-test-with-a-single-vm-instance&quot;&gt;Performance test with a single VM instance&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#performance-test-with-two-vm-instances&quot;&gt;Performance test with two VM instances&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#conclusions&quot;&gt;Conclusions&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;the-argument-for-multiple-vm-instances&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#the-argument-for-multiple-vm-instances&quot; aria-label=&quot;the argument for multiple vm instances permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;The argument for multiple VM instances&lt;/h2&gt;
&lt;p&gt;Running multiple instances of identical virtual machines is nearly always a good idea and became de-facto a standard in modern infrastructures running on Kubernetes. The concept of &lt;code class=&quot;language-text&quot;&gt;cattle vs pets&lt;/code&gt; describes these identical nodes as disposable &lt;code class=&quot;language-text&quot;&gt;cattle&lt;/code&gt;. We are encouraged to kill off nodes at will and replace them very quickly. Thus, increasing the resiliency of the infrastructure. On the other hand, once we start making custom modifications on individual nodes, they will slowly turn into &lt;code class=&quot;language-text&quot;&gt;pets&lt;/code&gt;. Something we need look after, care for and under no circumstances want to lose.&lt;/p&gt;
&lt;p&gt;In Kubernetes the &lt;code class=&quot;language-text&quot;&gt;cattle&lt;/code&gt; concept is enforced from the ground up. However, most production workloads these days still run on IIS or similiar web servers sitting behind a load balancer. All infrastructure engineers have come face-to-face with such setup at some point and the inevitable questions come up: How to size up virtual machine to get optimal performance? Is it better to use a large number of small instances or a small number of large instances?&lt;/p&gt;
&lt;h3 id=&quot;advantages-of-running-many-small-instances&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#advantages-of-running-many-small-instances&quot; aria-label=&quot;advantages of running many small instances permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Advantages of running many small instances&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Higher resiliency to failures. For example, if 1 out of 10 instance shuts down, 90% of the infrastructure resources remain unaffected. Compared that to a case where 1 out of 4 instances goes down, only 75% of infrastructure remains up and running.&lt;/li&gt;
&lt;li&gt;Potentially better resource utilisation as the increments are smaller. Not necessarily always the case though, as shown below.&lt;/li&gt;
&lt;li&gt;Potentially higher disk throughput. For example 5 separate premium 128 GiB SSDs will provide a much higher throughput than a single 640 GiB disk.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;disadvantages-of-running-many-small-instances&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#disadvantages-of-running-many-small-instances&quot; aria-label=&quot;disadvantages of running many small instances permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Disadvantages of running many small instances&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Baseline resource wastage - every instance has to dedicate a portion of resources for operating system and any kernel operations. &lt;/li&gt;
&lt;li&gt;Spinning up new instances is time consuming - new instances need to be configured and software packages deployed before the instance can serve traffic. A lot of this can be automated, but it does introduce another potential point where issues can creep up.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;There tends to be a sweetspot and gut feeling tells us that running 8 instances with a single vcore is not going to provide optimal results. If you run Windows Server 2016+ and IIS, the minimum you should consider for an infrastructure handling large volume of traffic is a VM instance with 4 vcores. Consider your memory requirements to decide between a memory-optimised or a general-purpose instance.&lt;/p&gt;
&lt;p&gt;The difference in real IIS performance between a single 8 vcore VM and two 4 vcores VMs however is not so obvious. I’ve run some performance tests using JMeter in an attempt to answer this question.&lt;/p&gt;
&lt;h2 id=&quot;infrastructure-setup&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#infrastructure-setup&quot; aria-label=&quot;infrastructure setup permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Infrastructure setup&lt;/h2&gt;
&lt;p&gt;The infrastructure setup consists of an Azure API management instance, followed by an application gateway that serves as a load balancer and TLS termination point. The traffic is load balanced to a virtual machine scaleset, which contains either 1 or 2 VM instances (in this case a DS12_v2 size). I’ve used two JMeter profiles. One that generates a medium level of traffic (load profile A). I’ve then created a second load profile B, which generates traffic levels sufficient enough to saturate the instances to a point when service degradation could occur.&lt;/p&gt;
&lt;p&gt;Infrastructure setup with a single VM instance:
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 715px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/72b3983716c22fb650a8af403a492b1c/d33ce/2-vm-configuration.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 23.333333333333332%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAFABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3QUH/8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQABBQJ//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQAGPwJ//8QAGBAAAwEBAAAAAAAAAAAAAAAAAAExEUH/2gAIAQEAAT8h4aKVn//aAAwDAQACAAMAAAAQ8A//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAZEAADAAMAAAAAAAAAAAAAAAAAARExQeH/2gAIAQEAAT8Qbe0KqVyhOg//2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/72b3983716c22fb650a8af403a492b1c/8ac56/2-vm-configuration.webp 240w,
/static/72b3983716c22fb650a8af403a492b1c/d3be9/2-vm-configuration.webp 480w,
/static/72b3983716c22fb650a8af403a492b1c/cb533/2-vm-configuration.webp 715w&quot;
          sizes=&quot;(max-width: 715px) 100vw, 715px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/72b3983716c22fb650a8af403a492b1c/09b79/2-vm-configuration.jpg 240w,
/static/72b3983716c22fb650a8af403a492b1c/7cc5e/2-vm-configuration.jpg 480w,
/static/72b3983716c22fb650a8af403a492b1c/d33ce/2-vm-configuration.jpg 715w&quot;
          sizes=&quot;(max-width: 715px) 100vw, 715px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/72b3983716c22fb650a8af403a492b1c/d33ce/2-vm-configuration.jpg&quot;
          alt=&quot;2-vm-configuration.jpg&quot;
          title=&quot;2-vm-configuration.jpg&quot;
          loading=&quot;lazy&quot;
          style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Infrastructure setup with a two VM instances:
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 715px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/3aadf9578ad51439bcce9bb13c7d78cf/d33ce/1-vm-configuration.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 32.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAG8AD//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAEFAn//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAY/An//xAAWEAEBAQAAAAAAAAAAAAAAAAAAASH/2gAIAQEAAT8h1qR//9oADAMBAAIAAwAAABDwD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABkQAAMBAQEAAAAAAAAAAAAAAAABIRFBYf/aAAgBAQABPxBxEtOIvaKw/9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/3aadf9578ad51439bcce9bb13c7d78cf/8ac56/1-vm-configuration.webp 240w,
/static/3aadf9578ad51439bcce9bb13c7d78cf/d3be9/1-vm-configuration.webp 480w,
/static/3aadf9578ad51439bcce9bb13c7d78cf/cb533/1-vm-configuration.webp 715w&quot;
          sizes=&quot;(max-width: 715px) 100vw, 715px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/3aadf9578ad51439bcce9bb13c7d78cf/09b79/1-vm-configuration.jpg 240w,
/static/3aadf9578ad51439bcce9bb13c7d78cf/7cc5e/1-vm-configuration.jpg 480w,
/static/3aadf9578ad51439bcce9bb13c7d78cf/d33ce/1-vm-configuration.jpg 715w&quot;
          sizes=&quot;(max-width: 715px) 100vw, 715px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/3aadf9578ad51439bcce9bb13c7d78cf/d33ce/1-vm-configuration.jpg&quot;
          alt=&quot;1-vm-configuration.jpg&quot;
          title=&quot;1-vm-configuration.jpg&quot;
          loading=&quot;lazy&quot;
          style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&quot;performance-test-with-a-single-vm-instance&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#performance-test-with-a-single-vm-instance&quot; aria-label=&quot;performance test with a single vm instance permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Performance test with a single VM instance&lt;/h2&gt;
&lt;h3 id=&quot;load-profile-a&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#load-profile-a&quot; aria-label=&quot;load profile a permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Load profile A&lt;/h3&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/5389f969b88d01e2c2b4faf298828ab1/3b78f/1-instance-load-profile-A.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 18.75%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAEABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAEEBf/EABUBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAHerlTIT//EABcQAAMBAAAAAAAAAAAAAAAAAAECEQD/2gAIAQEAAQUCzk1bP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABURAQEAAAAAAAAAAAAAAAAAAAIQ/9oACAECAQE/ATP/xAAXEAEAAwAAAAAAAAAAAAAAAAAAASEx/9oACAEBAAY/AlS1/8QAFxABAQEBAAAAAAAAAAAAAAAAAQAhcf/aAAgBAQABPyFYu05NbTf/2gAMAwEAAgADAAAAEAQP/8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oACAEDAQE/EK1//8QAFxEAAwEAAAAAAAAAAAAAAAAAAAEhMf/aAAgBAgEBPxDQ1T//xAAaEAADAAMBAAAAAAAAAAAAAAAAAREhMUHR/9oACAEBAAE/EGXAoR3yPCsfXbh//9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/5389f969b88d01e2c2b4faf298828ab1/8ac56/1-instance-load-profile-A.webp 240w,
/static/5389f969b88d01e2c2b4faf298828ab1/d3be9/1-instance-load-profile-A.webp 480w,
/static/5389f969b88d01e2c2b4faf298828ab1/e46b2/1-instance-load-profile-A.webp 960w,
/static/5389f969b88d01e2c2b4faf298828ab1/0528c/1-instance-load-profile-A.webp 1053w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/5389f969b88d01e2c2b4faf298828ab1/09b79/1-instance-load-profile-A.jpg 240w,
/static/5389f969b88d01e2c2b4faf298828ab1/7cc5e/1-instance-load-profile-A.jpg 480w,
/static/5389f969b88d01e2c2b4faf298828ab1/6a068/1-instance-load-profile-A.jpg 960w,
/static/5389f969b88d01e2c2b4faf298828ab1/3b78f/1-instance-load-profile-A.jpg 1053w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/5389f969b88d01e2c2b4faf298828ab1/6a068/1-instance-load-profile-A.jpg&quot;
          alt=&quot;1-instance-load-profile-A.jpg&quot;
          title=&quot;1-instance-load-profile-A.jpg&quot;
          loading=&quot;lazy&quot;
          style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/04cd85666cc9b4999dbd4c216ac7c535/01ab0/1-instance-tps-load-profile-A.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 36.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAG8AD//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAEFAn//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAY/An//xAAWEAEBAQAAAAAAAAAAAAAAAAAhABD/2gAIAQEAAT8hIz//2gAMAwEAAgADAAAAEAQf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGBABAQEBAQAAAAAAAAAAAAAAAQAxEUH/2gAIAQEAAT8QAbt2KeX/2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/04cd85666cc9b4999dbd4c216ac7c535/8ac56/1-instance-tps-load-profile-A.webp 240w,
/static/04cd85666cc9b4999dbd4c216ac7c535/d3be9/1-instance-tps-load-profile-A.webp 480w,
/static/04cd85666cc9b4999dbd4c216ac7c535/e46b2/1-instance-tps-load-profile-A.webp 960w,
/static/04cd85666cc9b4999dbd4c216ac7c535/063bf/1-instance-tps-load-profile-A.webp 1300w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/04cd85666cc9b4999dbd4c216ac7c535/09b79/1-instance-tps-load-profile-A.jpg 240w,
/static/04cd85666cc9b4999dbd4c216ac7c535/7cc5e/1-instance-tps-load-profile-A.jpg 480w,
/static/04cd85666cc9b4999dbd4c216ac7c535/6a068/1-instance-tps-load-profile-A.jpg 960w,
/static/04cd85666cc9b4999dbd4c216ac7c535/01ab0/1-instance-tps-load-profile-A.jpg 1300w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/04cd85666cc9b4999dbd4c216ac7c535/6a068/1-instance-tps-load-profile-A.jpg&quot;
          alt=&quot;1-instance-tps-load-profile-A.jpg&quot;
          title=&quot;1-instance-tps-load-profile-A.jpg&quot;
          loading=&quot;lazy&quot;
          style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/b75e7941b688698514fb30956d25fc5f/2233a/1-instance-response-times-load-profile-A.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 34.583333333333336%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAd2kBX//xAAVEAEBAAAAAAAAAAAAAAAAAAAQQf/aAAgBAQABBQKn/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQAGPwJ//8QAGBAAAgMAAAAAAAAAAAAAAAAAABARIaH/2gAIAQEAAT8hxBS//9oADAMBAAIAAwAAABB7z//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAECAQE/EIf/xAAaEAADAAMBAAAAAAAAAAAAAAAAAREhQVHw/9oACAEBAAE/EFV4WibaMcP/2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/b75e7941b688698514fb30956d25fc5f/8ac56/1-instance-response-times-load-profile-A.webp 240w,
/static/b75e7941b688698514fb30956d25fc5f/d3be9/1-instance-response-times-load-profile-A.webp 480w,
/static/b75e7941b688698514fb30956d25fc5f/e46b2/1-instance-response-times-load-profile-A.webp 960w,
/static/b75e7941b688698514fb30956d25fc5f/f992d/1-instance-response-times-load-profile-A.webp 1440w,
/static/b75e7941b688698514fb30956d25fc5f/739e4/1-instance-response-times-load-profile-A.webp 1533w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/b75e7941b688698514fb30956d25fc5f/09b79/1-instance-response-times-load-profile-A.jpg 240w,
/static/b75e7941b688698514fb30956d25fc5f/7cc5e/1-instance-response-times-load-profile-A.jpg 480w,
/static/b75e7941b688698514fb30956d25fc5f/6a068/1-instance-response-times-load-profile-A.jpg 960w,
/static/b75e7941b688698514fb30956d25fc5f/644c5/1-instance-response-times-load-profile-A.jpg 1440w,
/static/b75e7941b688698514fb30956d25fc5f/2233a/1-instance-response-times-load-profile-A.jpg 1533w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/b75e7941b688698514fb30956d25fc5f/6a068/1-instance-response-times-load-profile-A.jpg&quot;
          alt=&quot;1-instance-response-times-load-profile-A.jpg&quot;
          title=&quot;1-instance-response-times-load-profile-A.jpg&quot;
          loading=&quot;lazy&quot;
          style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&quot;load-profile-b&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#load-profile-b&quot; aria-label=&quot;load profile b permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Load profile B&lt;/h3&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/3845e342e7386ce737120775d28c128a/3b78f/1-instance-load-profile-B.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 18.75%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAEABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAIEBf/EABYBAQEBAAAAAAAAAAAAAAAAAAIAAf/aAAwDAQACEAMQAAAB36wskI//xAAXEAADAQAAAAAAAAAAAAAAAAAAAhEx/9oACAEBAAEFAh7Uz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAECAQE/ASf/xAAXEAEBAQEAAAAAAAAAAAAAAAAAATEy/9oACAEBAAY/AnVja//EABkQAAIDAQAAAAAAAAAAAAAAAABxARExQf/aAAgBAQABPyE5UC25mf/aAAwDAQACAAMAAAAQd/8A/8QAFxEBAAMAAAAAAAAAAAAAAAAAAAExQf/aAAgBAwEBPxDU2//EABYRAQEBAAAAAAAAAAAAAAAAAAAxAf/aAAgBAgEBPxC21//EABkQAQADAQEAAAAAAAAAAAAAAAEAESExgf/aAAgBAQABPxD2FYquMIMkb6tn/9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/3845e342e7386ce737120775d28c128a/8ac56/1-instance-load-profile-B.webp 240w,
/static/3845e342e7386ce737120775d28c128a/d3be9/1-instance-load-profile-B.webp 480w,
/static/3845e342e7386ce737120775d28c128a/e46b2/1-instance-load-profile-B.webp 960w,
/static/3845e342e7386ce737120775d28c128a/0528c/1-instance-load-profile-B.webp 1053w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/3845e342e7386ce737120775d28c128a/09b79/1-instance-load-profile-B.jpg 240w,
/static/3845e342e7386ce737120775d28c128a/7cc5e/1-instance-load-profile-B.jpg 480w,
/static/3845e342e7386ce737120775d28c128a/6a068/1-instance-load-profile-B.jpg 960w,
/static/3845e342e7386ce737120775d28c128a/3b78f/1-instance-load-profile-B.jpg 1053w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/3845e342e7386ce737120775d28c128a/6a068/1-instance-load-profile-B.jpg&quot;
          alt=&quot;1-instance-load-profile-B.jpg&quot;
          title=&quot;1-instance-load-profile-B.jpg&quot;
          loading=&quot;lazy&quot;
          style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/d0278ca34340d4e381da0fc1a96f6832/2dc07/1-instance-tps-load-profile-B.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 37.083333333333336%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAG8AD//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAEFAn//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAY/An//xAAWEAEBAQAAAAAAAAAAAAAAAAAhABD/2gAIAQEAAT8hIz//2gAMAwEAAgADAAAAEAAf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGBABAQEBAQAAAAAAAAAAAAAAAQARMUH/2gAIAQEAAT8QAdtc55f/2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/d0278ca34340d4e381da0fc1a96f6832/8ac56/1-instance-tps-load-profile-B.webp 240w,
/static/d0278ca34340d4e381da0fc1a96f6832/d3be9/1-instance-tps-load-profile-B.webp 480w,
/static/d0278ca34340d4e381da0fc1a96f6832/e46b2/1-instance-tps-load-profile-B.webp 960w,
/static/d0278ca34340d4e381da0fc1a96f6832/3cc91/1-instance-tps-load-profile-B.webp 1286w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/d0278ca34340d4e381da0fc1a96f6832/09b79/1-instance-tps-load-profile-B.jpg 240w,
/static/d0278ca34340d4e381da0fc1a96f6832/7cc5e/1-instance-tps-load-profile-B.jpg 480w,
/static/d0278ca34340d4e381da0fc1a96f6832/6a068/1-instance-tps-load-profile-B.jpg 960w,
/static/d0278ca34340d4e381da0fc1a96f6832/2dc07/1-instance-tps-load-profile-B.jpg 1286w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/d0278ca34340d4e381da0fc1a96f6832/6a068/1-instance-tps-load-profile-B.jpg&quot;
          alt=&quot;1-instance-tps-load-profile-B.jpg&quot;
          title=&quot;1-instance-tps-load-profile-B.jpg&quot;
          loading=&quot;lazy&quot;
          style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/87784850fea0021bf6e852badcee5cc8/ba09e/1-instance-response-times-load-profile-B.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 34.583333333333336%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAd2kBX//xAAVEAEBAAAAAAAAAAAAAAAAAAAQQf/aAAgBAQABBQKn/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQAGPwJ//8QAGBAAAgMAAAAAAAAAAAAAAAAAAAEQEaH/2gAIAQEAAT8hxQnH/9oADAMBAAIAAwAAABALz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABYRAQEBAAAAAAAAAAAAAAAAABEQIf/aAAgBAgEBPxA1n//EABoQAAICAwAAAAAAAAAAAAAAAAABESFBUfD/2gAIAQEAAT8QVdJkQ0qvJC0f/9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/87784850fea0021bf6e852badcee5cc8/8ac56/1-instance-response-times-load-profile-B.webp 240w,
/static/87784850fea0021bf6e852badcee5cc8/d3be9/1-instance-response-times-load-profile-B.webp 480w,
/static/87784850fea0021bf6e852badcee5cc8/e46b2/1-instance-response-times-load-profile-B.webp 960w,
/static/87784850fea0021bf6e852badcee5cc8/f992d/1-instance-response-times-load-profile-B.webp 1440w,
/static/87784850fea0021bf6e852badcee5cc8/56373/1-instance-response-times-load-profile-B.webp 1531w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/87784850fea0021bf6e852badcee5cc8/09b79/1-instance-response-times-load-profile-B.jpg 240w,
/static/87784850fea0021bf6e852badcee5cc8/7cc5e/1-instance-response-times-load-profile-B.jpg 480w,
/static/87784850fea0021bf6e852badcee5cc8/6a068/1-instance-response-times-load-profile-B.jpg 960w,
/static/87784850fea0021bf6e852badcee5cc8/644c5/1-instance-response-times-load-profile-B.jpg 1440w,
/static/87784850fea0021bf6e852badcee5cc8/ba09e/1-instance-response-times-load-profile-B.jpg 1531w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/87784850fea0021bf6e852badcee5cc8/6a068/1-instance-response-times-load-profile-B.jpg&quot;
          alt=&quot;1-instance-response-times-load-profile-B.jpg&quot;
          title=&quot;1-instance-response-times-load-profile-B.jpg&quot;
          loading=&quot;lazy&quot;
          style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&quot;performance-test-with-two-vm-instances&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#performance-test-with-two-vm-instances&quot; aria-label=&quot;performance test with two vm instances permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Performance test with two VM instances&lt;/h2&gt;
&lt;h3 id=&quot;load-profile-a-1&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#load-profile-a-1&quot; aria-label=&quot;load profile a 1 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Load profile A&lt;/h3&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/5d5cc679d89002f804df44ce3368b24d/3b78f/2-instances-load-profile-A-1.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 18.75%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAEABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAQF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAgED/9oADAMBAAIQAxAAAAHenFAWf//EABgQAAIDAAAAAAAAAAAAAAAAAAARAQIS/9oACAEBAAEFAi71DX//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAgEBPwEn/8QAFhABAQEAAAAAAAAAAAAAAAAAAAEx/9oACAEBAAY/Am1tf//EABcQAAMBAAAAAAAAAAAAAAAAAAABIXH/2gAIAQEAAT8hHSFYQF//2gAMAwEAAgADAAAAEHPf/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAR/9oACAEDAQE/EGV2/8QAFxEBAAMAAAAAAAAAAAAAAAAAAAERMf/aAAgBAgEBPxDaof/EABoQAQEBAAMBAAAAAAAAAAAAAAERACExUdH/2gAIAQEAAT8QFveOTYcR8zaLvtN//9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/5d5cc679d89002f804df44ce3368b24d/8ac56/2-instances-load-profile-A-1.webp 240w,
/static/5d5cc679d89002f804df44ce3368b24d/d3be9/2-instances-load-profile-A-1.webp 480w,
/static/5d5cc679d89002f804df44ce3368b24d/e46b2/2-instances-load-profile-A-1.webp 960w,
/static/5d5cc679d89002f804df44ce3368b24d/0528c/2-instances-load-profile-A-1.webp 1053w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/5d5cc679d89002f804df44ce3368b24d/09b79/2-instances-load-profile-A-1.jpg 240w,
/static/5d5cc679d89002f804df44ce3368b24d/7cc5e/2-instances-load-profile-A-1.jpg 480w,
/static/5d5cc679d89002f804df44ce3368b24d/6a068/2-instances-load-profile-A-1.jpg 960w,
/static/5d5cc679d89002f804df44ce3368b24d/3b78f/2-instances-load-profile-A-1.jpg 1053w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/5d5cc679d89002f804df44ce3368b24d/6a068/2-instances-load-profile-A-1.jpg&quot;
          alt=&quot;2-instances-load-profile-A-1.jpg&quot;
          title=&quot;2-instances-load-profile-A-1.jpg&quot;
          loading=&quot;lazy&quot;
          style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/a114dc3b2c8a7f30617d0c86bf37bd3d/3b78f/2-instances-load-profile-A-2.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 18.75%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAEABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAEEBf/EABUBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAHerlEhj//EABgQAAIDAAAAAAAAAAAAAAAAAAARAQIS/9oACAEBAAEFAi71DX//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAgEBPwEn/8QAFhABAQEAAAAAAAAAAAAAAAAAADEB/9oACAEBAAY/AlXX/8QAGBAAAwEBAAAAAAAAAAAAAAAAAAERIXH/2gAIAQEAAT8ho64dcMlL/9oADAMBAAIAAwAAABAD7//EABYRAQEBAAAAAAAAAAAAAAAAAAABEf/aAAgBAwEBPxCtr//EABYRAQEBAAAAAAAAAAAAAAAAAAEAMf/aAAgBAgEBPxDchf/EABkQAQEBAAMAAAAAAAAAAAAAAAERACFR0f/aAAgBAQABPxCrog+HEeZJkPdN/9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/a114dc3b2c8a7f30617d0c86bf37bd3d/8ac56/2-instances-load-profile-A-2.webp 240w,
/static/a114dc3b2c8a7f30617d0c86bf37bd3d/d3be9/2-instances-load-profile-A-2.webp 480w,
/static/a114dc3b2c8a7f30617d0c86bf37bd3d/e46b2/2-instances-load-profile-A-2.webp 960w,
/static/a114dc3b2c8a7f30617d0c86bf37bd3d/0528c/2-instances-load-profile-A-2.webp 1053w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/a114dc3b2c8a7f30617d0c86bf37bd3d/09b79/2-instances-load-profile-A-2.jpg 240w,
/static/a114dc3b2c8a7f30617d0c86bf37bd3d/7cc5e/2-instances-load-profile-A-2.jpg 480w,
/static/a114dc3b2c8a7f30617d0c86bf37bd3d/6a068/2-instances-load-profile-A-2.jpg 960w,
/static/a114dc3b2c8a7f30617d0c86bf37bd3d/3b78f/2-instances-load-profile-A-2.jpg 1053w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/a114dc3b2c8a7f30617d0c86bf37bd3d/6a068/2-instances-load-profile-A-2.jpg&quot;
          alt=&quot;2-instances-load-profile-A-2.jpg&quot;
          title=&quot;2-instances-load-profile-A-2.jpg&quot;
          loading=&quot;lazy&quot;
          style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/2488df0c0253852f68b31d36cb40f903/10cbc/2-instances-tps-load-profile-A.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 36.25%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAG8AD//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAEFAn//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAY/An//xAAWEAEBAQAAAAAAAAAAAAAAAAAhABD/2gAIAQEAAT8hIz//2gAMAwEAAgADAAAAEAQf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAFxABAQEBAAAAAAAAAAAAAAAAAQARQf/aAAgBAQABPxAguc5f/9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/2488df0c0253852f68b31d36cb40f903/8ac56/2-instances-tps-load-profile-A.webp 240w,
/static/2488df0c0253852f68b31d36cb40f903/d3be9/2-instances-tps-load-profile-A.webp 480w,
/static/2488df0c0253852f68b31d36cb40f903/e46b2/2-instances-tps-load-profile-A.webp 960w,
/static/2488df0c0253852f68b31d36cb40f903/94575/2-instances-tps-load-profile-A.webp 1298w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/2488df0c0253852f68b31d36cb40f903/09b79/2-instances-tps-load-profile-A.jpg 240w,
/static/2488df0c0253852f68b31d36cb40f903/7cc5e/2-instances-tps-load-profile-A.jpg 480w,
/static/2488df0c0253852f68b31d36cb40f903/6a068/2-instances-tps-load-profile-A.jpg 960w,
/static/2488df0c0253852f68b31d36cb40f903/10cbc/2-instances-tps-load-profile-A.jpg 1298w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/2488df0c0253852f68b31d36cb40f903/6a068/2-instances-tps-load-profile-A.jpg&quot;
          alt=&quot;2-instances-tps-load-profile-A.jpg&quot;
          title=&quot;2-instances-tps-load-profile-A.jpg&quot;
          loading=&quot;lazy&quot;
          style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/009850166ea6e081b4dcdedf5f4cd437/35868/2-instances-response-times-load-profile-A.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 34.166666666666664%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAd2kBX//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAEFAn//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAY/An//xAAaEAABBQEAAAAAAAAAAAAAAAABABAhMUFR/9oACAEBAAE/IRZ5ihv/2gAMAwEAAgADAAAAEHvP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFhEBAQEAAAAAAAAAAAAAAAAAARAR/9oACAECAQE/EAyf/8QAGxABAAICAwAAAAAAAAAAAAAAAQARITFBUbH/2gAIAQEAAT8Qwv4FPYK0ROif/9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/009850166ea6e081b4dcdedf5f4cd437/8ac56/2-instances-response-times-load-profile-A.webp 240w,
/static/009850166ea6e081b4dcdedf5f4cd437/d3be9/2-instances-response-times-load-profile-A.webp 480w,
/static/009850166ea6e081b4dcdedf5f4cd437/e46b2/2-instances-response-times-load-profile-A.webp 960w,
/static/009850166ea6e081b4dcdedf5f4cd437/f992d/2-instances-response-times-load-profile-A.webp 1440w,
/static/009850166ea6e081b4dcdedf5f4cd437/305dd/2-instances-response-times-load-profile-A.webp 1525w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/009850166ea6e081b4dcdedf5f4cd437/09b79/2-instances-response-times-load-profile-A.jpg 240w,
/static/009850166ea6e081b4dcdedf5f4cd437/7cc5e/2-instances-response-times-load-profile-A.jpg 480w,
/static/009850166ea6e081b4dcdedf5f4cd437/6a068/2-instances-response-times-load-profile-A.jpg 960w,
/static/009850166ea6e081b4dcdedf5f4cd437/644c5/2-instances-response-times-load-profile-A.jpg 1440w,
/static/009850166ea6e081b4dcdedf5f4cd437/35868/2-instances-response-times-load-profile-A.jpg 1525w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/009850166ea6e081b4dcdedf5f4cd437/6a068/2-instances-response-times-load-profile-A.jpg&quot;
          alt=&quot;2-instances-response-times-load-profile-A.jpg&quot;
          title=&quot;2-instances-response-times-load-profile-A.jpg&quot;
          loading=&quot;lazy&quot;
          style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&quot;load-profile-b-1&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#load-profile-b-1&quot; aria-label=&quot;load profile b 1 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Load profile B&lt;/h3&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/50ddf984b72be341e92b4c75c26181bd/3b78f/2-instances-load-profile-B-1.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 18.75%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAEABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAMF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAQL/2gAMAwEAAhADEAAAAd6AgVP/xAAYEAACAwAAAAAAAAAAAAAAAAAAEQECMf/aAAgBAQABBQIu3Gf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAgEBPwEn/8QAFxABAQEBAAAAAAAAAAAAAAAAAAExMv/aAAgBAQAGPwJ1Y2v/xAAZEAABBQAAAAAAAAAAAAAAAAAAARExQXH/2gAIAQEAAT8hEw4h9o//2gAMAwEAAgADAAAAEI/P/8QAFhEBAQEAAAAAAAAAAAAAAAAAAAEx/9oACAEDAQE/EF1//8QAFhEBAQEAAAAAAAAAAAAAAAAAAAEx/9oACAECAQE/ENrH/8QAGhABAAMAAwAAAAAAAAAAAAAAAQARITFRsf/aAAgBAQABPxDRNiCkVwwPISbd2uz/2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/50ddf984b72be341e92b4c75c26181bd/8ac56/2-instances-load-profile-B-1.webp 240w,
/static/50ddf984b72be341e92b4c75c26181bd/d3be9/2-instances-load-profile-B-1.webp 480w,
/static/50ddf984b72be341e92b4c75c26181bd/e46b2/2-instances-load-profile-B-1.webp 960w,
/static/50ddf984b72be341e92b4c75c26181bd/0528c/2-instances-load-profile-B-1.webp 1053w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/50ddf984b72be341e92b4c75c26181bd/09b79/2-instances-load-profile-B-1.jpg 240w,
/static/50ddf984b72be341e92b4c75c26181bd/7cc5e/2-instances-load-profile-B-1.jpg 480w,
/static/50ddf984b72be341e92b4c75c26181bd/6a068/2-instances-load-profile-B-1.jpg 960w,
/static/50ddf984b72be341e92b4c75c26181bd/3b78f/2-instances-load-profile-B-1.jpg 1053w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/50ddf984b72be341e92b4c75c26181bd/6a068/2-instances-load-profile-B-1.jpg&quot;
          alt=&quot;2-instances-load-profile-B-1.jpg&quot;
          title=&quot;2-instances-load-profile-B-1.jpg&quot;
          loading=&quot;lazy&quot;
          style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/992983cb0276ea7111b8294e67b2bd44/3b78f/2-instances-load-profile-B-2.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 18.75%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAEABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAIEBf/EABUBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAHerFEgx//EABgQAAIDAAAAAAAAAAAAAAAAAAARAQIS/9oACAEBAAEFAi71DX//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAgEBPwEn/8QAFxABAQEBAAAAAAAAAAAAAAAAAAExMv/aAAgBAQAGPwJ1Y2v/xAAXEAADAQAAAAAAAAAAAAAAAAAAAUFh/9oACAEBAAE/ISTAixx//9oADAMBAAIAAwAAABB33//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAEDAQE/EFf/xAAWEQEBAQAAAAAAAAAAAAAAAAAAATH/2gAIAQIBAT8Q2sf/xAAbEAEAAgIDAAAAAAAAAAAAAAABABEhQTFRsf/aAAgBAQABPxC3De5rVXIV5GjYdqT/2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/992983cb0276ea7111b8294e67b2bd44/8ac56/2-instances-load-profile-B-2.webp 240w,
/static/992983cb0276ea7111b8294e67b2bd44/d3be9/2-instances-load-profile-B-2.webp 480w,
/static/992983cb0276ea7111b8294e67b2bd44/e46b2/2-instances-load-profile-B-2.webp 960w,
/static/992983cb0276ea7111b8294e67b2bd44/0528c/2-instances-load-profile-B-2.webp 1053w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/992983cb0276ea7111b8294e67b2bd44/09b79/2-instances-load-profile-B-2.jpg 240w,
/static/992983cb0276ea7111b8294e67b2bd44/7cc5e/2-instances-load-profile-B-2.jpg 480w,
/static/992983cb0276ea7111b8294e67b2bd44/6a068/2-instances-load-profile-B-2.jpg 960w,
/static/992983cb0276ea7111b8294e67b2bd44/3b78f/2-instances-load-profile-B-2.jpg 1053w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/992983cb0276ea7111b8294e67b2bd44/6a068/2-instances-load-profile-B-2.jpg&quot;
          alt=&quot;2-instances-load-profile-B-2.jpg&quot;
          title=&quot;2-instances-load-profile-B-2.jpg&quot;
          loading=&quot;lazy&quot;
          style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/21b0c6f024c43ce7d37f71f5493ab9c2/3bf57/2-instances-tps-load-profile-B.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 35.833333333333336%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAG8AD//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAEFAn//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAY/An//xAAWEAEBAQAAAAAAAAAAAAAAAAAhABD/2gAIAQEAAT8hIz//2gAMAwEAAgADAAAAEAQf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGBABAQEBAQAAAAAAAAAAAAAAAQAxEUH/2gAIAQEAAT8QAbsLnnl//9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/21b0c6f024c43ce7d37f71f5493ab9c2/8ac56/2-instances-tps-load-profile-B.webp 240w,
/static/21b0c6f024c43ce7d37f71f5493ab9c2/d3be9/2-instances-tps-load-profile-B.webp 480w,
/static/21b0c6f024c43ce7d37f71f5493ab9c2/e46b2/2-instances-tps-load-profile-B.webp 960w,
/static/21b0c6f024c43ce7d37f71f5493ab9c2/03522/2-instances-tps-load-profile-B.webp 1302w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/21b0c6f024c43ce7d37f71f5493ab9c2/09b79/2-instances-tps-load-profile-B.jpg 240w,
/static/21b0c6f024c43ce7d37f71f5493ab9c2/7cc5e/2-instances-tps-load-profile-B.jpg 480w,
/static/21b0c6f024c43ce7d37f71f5493ab9c2/6a068/2-instances-tps-load-profile-B.jpg 960w,
/static/21b0c6f024c43ce7d37f71f5493ab9c2/3bf57/2-instances-tps-load-profile-B.jpg 1302w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/21b0c6f024c43ce7d37f71f5493ab9c2/6a068/2-instances-tps-load-profile-B.jpg&quot;
          alt=&quot;2-instances-tps-load-profile-B.jpg&quot;
          title=&quot;2-instances-tps-load-profile-B.jpg&quot;
          loading=&quot;lazy&quot;
          style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/ea2278ab4cd88673d10c896488c69d21/08d92/2-instances-response-times-load-profile-B.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 34.583333333333336%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAdyiAr//xAAVEAEBAAAAAAAAAAAAAAAAAAAQQf/aAAgBAQABBQKn/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQAGPwJ//8QAGBAAAgMAAAAAAAAAAAAAAAAAAAEQEaH/2gAIAQEAAT8hxQmo/9oADAMBAAIAAwAAABCLz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAECAQE/EIf/xAAaEAACAgMAAAAAAAAAAAAAAAAAIQERQVHx/9oACAEBAAE/EIV+lkik8i0f/9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/ea2278ab4cd88673d10c896488c69d21/8ac56/2-instances-response-times-load-profile-B.webp 240w,
/static/ea2278ab4cd88673d10c896488c69d21/d3be9/2-instances-response-times-load-profile-B.webp 480w,
/static/ea2278ab4cd88673d10c896488c69d21/e46b2/2-instances-response-times-load-profile-B.webp 960w,
/static/ea2278ab4cd88673d10c896488c69d21/f992d/2-instances-response-times-load-profile-B.webp 1440w,
/static/ea2278ab4cd88673d10c896488c69d21/74c35/2-instances-response-times-load-profile-B.webp 1521w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/ea2278ab4cd88673d10c896488c69d21/09b79/2-instances-response-times-load-profile-B.jpg 240w,
/static/ea2278ab4cd88673d10c896488c69d21/7cc5e/2-instances-response-times-load-profile-B.jpg 480w,
/static/ea2278ab4cd88673d10c896488c69d21/6a068/2-instances-response-times-load-profile-B.jpg 960w,
/static/ea2278ab4cd88673d10c896488c69d21/644c5/2-instances-response-times-load-profile-B.jpg 1440w,
/static/ea2278ab4cd88673d10c896488c69d21/08d92/2-instances-response-times-load-profile-B.jpg 1521w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/ea2278ab4cd88673d10c896488c69d21/6a068/2-instances-response-times-load-profile-B.jpg&quot;
          alt=&quot;2-instances-response-times-load-profile-B.jpg&quot;
          title=&quot;2-instances-response-times-load-profile-B.jpg&quot;
          loading=&quot;lazy&quot;
          style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2 id=&quot;conclusions&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#conclusions&quot; aria-label=&quot;conclusions permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Conclusions&lt;/h2&gt;
&lt;p&gt;In conclusion, it looks like there indeed isn’t much difference in terms of raw IIS performance between the two setups.
The measured response times, transactions per second, CPU profiles and process queue lengths are very similar. The configuration with 2 VMs produced fewer responses times between 500ms and 1500ms, but a higher number over 1500ms. The configuration with a single VM on the other hand produced more responses between 500ms and 1500ms, but very few over 1500ms.&lt;/p&gt;
&lt;p&gt;Thefore, the IIS performance should not be the deciding factor when choosing the size of a VM. The performance seems to scale reasonably well and the decision should instead be focused around overall infrastructure resiliency requirements and how quickly and reliably can new instances be spun up when your infrastructure really needs them.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Building geo-redundant Azure API Management on a budget]]></title><description><![CDATA[Azure API management is a useful product in Azure offering, but the pricing structure makes it unattractive for building low cost geo-redundant infrastructure with no single point of failure.]]></description><link>https://blog.anton-it.dev/posts/buiding-geo-redundant-azure-apim-on-a-budget</link><guid isPermaLink="false">https://blog.anton-it.dev/posts/buiding-geo-redundant-azure-apim-on-a-budget</guid><pubDate>Wed, 02 Sep 2020 22:40:32 GMT</pubDate><content:encoded>&lt;p&gt;Azure API management is a useful product in Azure offering, but the pricing structure makes it unattractive for building low cost geo-redundant infrastructure with no single point of failure.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#what-is-azure-api-management-for&quot;&gt;What is Azure API Management for&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#the-price-of-managed-geo-redundancy&quot;&gt;The price of managed geo-redundancy&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#diy-geo-redundancy-yourself&quot;&gt;DIY geo-redundancy&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#solving-the-synchronisation-issue&quot;&gt;Solving the synchronisation issue&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#the-unintended-benefits-of-building-your-own-geo-redundancy&quot;&gt;The unintended benefits of building your own geo-redundancy&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;what-is-azure-api-management-for&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#what-is-azure-api-management-for&quot; aria-label=&quot;what is azure api management for permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;What is Azure API Management for&lt;/h2&gt;
&lt;p&gt;Azure API management is a PaaS (platform-as-a-service) product in Azure designed to sit in front of your main API cluster/servers. It provides useful features such as:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;detailed analytics data&lt;/li&gt;
&lt;li&gt;authentication/athorisation&lt;/li&gt;
&lt;li&gt;hide sensitive APIs while exposing only the ones you want (we all had that one API we didn’t want anyone to see, but were too lazy to secure it properly)&lt;/li&gt;
&lt;li&gt;out-of-the-box developer portal giving users overview of all API operations&lt;/li&gt;
&lt;li&gt;API management is &lt;code class=&quot;language-text&quot;&gt;not&lt;/code&gt; a load balancer, use Azure Front Door or Application Gateway for load balancing&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;the-price-of-managed-geo-redundancy&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#the-price-of-managed-geo-redundancy&quot; aria-label=&quot;the price of managed geo redundancy permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;The price of managed geo-redundancy&lt;/h2&gt;
&lt;p&gt;One of the drawbacks of API management is the relative cost of a multi-regional deployment. If full geo-redundancy is required for your infrastructure, your only option is to use the highest &lt;code class=&quot;language-text&quot;&gt;premium tier&lt;/code&gt;, which costs an eye-watering £2083/month (in West Europe region). Not only that, you’ll need to double this figure, since you need a premium instance in two separate regions. If you don’t need other premium features, such as handling 8000 request/sec (2 x 4000) or a virtual network support, you’ll be sending a lot of money to Microsoft every month without getting much in return.&lt;/p&gt;
&lt;p&gt;The &lt;code class=&quot;language-text&quot;&gt;basic tier&lt;/code&gt; still handles around 1000 request/sec, which is more than sufficient for most solutions and costs just over £100/month. So, can you actually build the geo-redundancy into API management yourself? Yes. The only problem you have to solve is synchronisation of your APIs, users subscriptions and products across the instances.&lt;/p&gt;
&lt;h2 id=&quot;diy-geo-redundancy&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#diy-geo-redundancy&quot; aria-label=&quot;diy geo redundancy permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;DIY geo-redundancy&lt;/h2&gt;
&lt;p&gt;Assuming the infrastructure consists of a “blue” and “green” side with an API management instance sitting in front of it, the diagram would look like this:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 344px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/4f21fe82792266e7571b1b7ec6e1ea6a/4fcbd/apim-bluegreen.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 125.83333333333333%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAZABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIBBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe/NSUCdwawf/8QAFRABAQAAAAAAAAAAAAAAAAAAIBH/2gAIAQEAAQUCVX//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAUEAEAAAAAAAAAAAAAAAAAAAAw/9oACAEBAAY/Ak//xAAZEAEAAwEBAAAAAAAAAAAAAAABABAhEUH/2gAIAQEAAT8hg7YvXKdRcg9p8hP/2gAMAwEAAgADAAAAEPPJPP/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8QH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8QH//EABwQAQABBQEBAAAAAAAAAAAAAAEAEBEhMXFBYf/aAAgBAQABPxBbCxbi22i2mUsCgA+QzoxBGI7ezTiep//Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/4f21fe82792266e7571b1b7ec6e1ea6a/8ac56/apim-bluegreen.webp 240w,
/static/4f21fe82792266e7571b1b7ec6e1ea6a/4664d/apim-bluegreen.webp 344w&quot;
          sizes=&quot;(max-width: 344px) 100vw, 344px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/4f21fe82792266e7571b1b7ec6e1ea6a/09b79/apim-bluegreen.jpg 240w,
/static/4f21fe82792266e7571b1b7ec6e1ea6a/4fcbd/apim-bluegreen.jpg 344w&quot;
          sizes=&quot;(max-width: 344px) 100vw, 344px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/4f21fe82792266e7571b1b7ec6e1ea6a/4fcbd/apim-bluegreen.jpg&quot;
          alt=&quot;apim-bluegreen.jpg&quot;
          title=&quot;apim-bluegreen.jpg&quot;
          loading=&quot;lazy&quot;
          style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;After introducing a second API management instance in WestUK region and a traffic manager, the diagram would look like this:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 359px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/f61fe53f566b033f246b658f6d27b5b0/1e323/apim-geo-redundant-bluegreen.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 160.83333333333334%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAgABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe/INoGaKyP/xAAYEAACAwAAAAAAAAAAAAAAAAAAEQEhMP/aAAgBAQABBQIdk4M//8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwEf/8QAFBABAAAAAAAAAAAAAAAAAAAAMP/aAAgBAQAGPwJP/8QAHBABAAICAwEAAAAAAAAAAAAAAQAhEBExQWFx/9oACAEBAAE/IYWGE9G4rriHsZe2sLcWp8T/2gAMAwEAAgADAAAAEKAEPP/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8QH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8QH//EABsQAQADAQEBAQAAAAAAAAAAAAEAESExQRBh/9oACAEBAAE/EFqA6M/Pha9E2zXsamKZxy4dWDmw0uV0pxlIa7CgFp//2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/f61fe53f566b033f246b658f6d27b5b0/8ac56/apim-geo-redundant-bluegreen.webp 240w,
/static/f61fe53f566b033f246b658f6d27b5b0/4b5c0/apim-geo-redundant-bluegreen.webp 359w&quot;
          sizes=&quot;(max-width: 359px) 100vw, 359px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/f61fe53f566b033f246b658f6d27b5b0/09b79/apim-geo-redundant-bluegreen.jpg 240w,
/static/f61fe53f566b033f246b658f6d27b5b0/1e323/apim-geo-redundant-bluegreen.jpg 359w&quot;
          sizes=&quot;(max-width: 359px) 100vw, 359px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/f61fe53f566b033f246b658f6d27b5b0/1e323/apim-geo-redundant-bluegreen.jpg&quot;
          alt=&quot;apim-geo-redundant-bluegreen.jpg&quot;
          title=&quot;apim-geo-redundant-bluegreen.jpg&quot;
          loading=&quot;lazy&quot;
          style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;The thing to bear in mind is: Azure Traffic Manager is a DNS-based routing tool. It is capable of switching traffic manually between the API Management instances, however a more common configuration utilises a health probe. In a “priority” routing configuration, the decision to route traffic to an instance is done based on the endpoint’s priority and health status. Thefore it is useful to have a root API operation configured within API Mananagement, which has a single responsibility - to serve a &lt;code class=&quot;language-text&quot;&gt;200 OK&lt;/code&gt; response to the traffic manager probe. Here’s a sample configuration for such an API operation:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 818px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/de2954fc38266ccac82a9c6d2eae1557/22492/apim-health-probe-api.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 35.416666666666664%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3qAH/8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQABBQJ//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQAGPwJ//8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQABPyF//9oADAMBAAIAAwAAABCAD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABkQAAIDAQAAAAAAAAAAAAAAAAABESFRMf/aAAgBAQABPxBrHFiTjpen/9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/de2954fc38266ccac82a9c6d2eae1557/8ac56/apim-health-probe-api.webp 240w,
/static/de2954fc38266ccac82a9c6d2eae1557/d3be9/apim-health-probe-api.webp 480w,
/static/de2954fc38266ccac82a9c6d2eae1557/3a941/apim-health-probe-api.webp 818w&quot;
          sizes=&quot;(max-width: 818px) 100vw, 818px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/de2954fc38266ccac82a9c6d2eae1557/09b79/apim-health-probe-api.jpg 240w,
/static/de2954fc38266ccac82a9c6d2eae1557/7cc5e/apim-health-probe-api.jpg 480w,
/static/de2954fc38266ccac82a9c6d2eae1557/22492/apim-health-probe-api.jpg 818w&quot;
          sizes=&quot;(max-width: 818px) 100vw, 818px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/de2954fc38266ccac82a9c6d2eae1557/22492/apim-health-probe-api.jpg&quot;
          alt=&quot;apim-health-probe-api.jpg&quot;
          title=&quot;apim-health-probe-api.jpg&quot;
          loading=&quot;lazy&quot;
          style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;We need the response to be served by API Management instance itself without involving our backend infrastructure (unlike normal API operations which would call the backend infrastructure when serving incoming requests), so we also need to create a simple policy for this API operation to facilitate the behaviour:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 580px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/544228810bdf044cdf641b660b0e8223/78d0c/apim-health-probe-policy.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 60%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAd2psQw//8QAFRABAQAAAAAAAAAAAAAAAAAAEAH/2gAIAQEAAQUCY//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABUQAQEAAAAAAAAAAAAAAAAAACAh/9oACAEBAAY/Aov/xAAaEAACAgMAAAAAAAAAAAAAAAABEAARMUFR/9oACAEBAAE/IdxR6si//9oADAMBAAIAAwAAABAnD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABwQAQACAQUAAAAAAAAAAAAAAAEAESEQMUFRgf/aAAgBAQABPxClZgm8OS3kp7mTa//Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/544228810bdf044cdf641b660b0e8223/8ac56/apim-health-probe-policy.webp 240w,
/static/544228810bdf044cdf641b660b0e8223/d3be9/apim-health-probe-policy.webp 480w,
/static/544228810bdf044cdf641b660b0e8223/4fac6/apim-health-probe-policy.webp 580w&quot;
          sizes=&quot;(max-width: 580px) 100vw, 580px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/544228810bdf044cdf641b660b0e8223/09b79/apim-health-probe-policy.jpg 240w,
/static/544228810bdf044cdf641b660b0e8223/7cc5e/apim-health-probe-policy.jpg 480w,
/static/544228810bdf044cdf641b660b0e8223/78d0c/apim-health-probe-policy.jpg 580w&quot;
          sizes=&quot;(max-width: 580px) 100vw, 580px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/544228810bdf044cdf641b660b0e8223/78d0c/apim-health-probe-policy.jpg&quot;
          alt=&quot;apim-health-probe-policy.jpg&quot;
          title=&quot;apim-health-probe-policy.jpg&quot;
          loading=&quot;lazy&quot;
          style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;This policy takes any inbound request and responds with a 200 (OK) response. It also adds an “instance name” header with a value of “weu-apim”. This is useful if we need to send a request to the traffic manager ourselves to identify where the traffic is being routed. The response header will indicate the response was served by API management instance in West Europe (weu).&lt;/p&gt;
&lt;p&gt;If there is a regional outage, or the API management instance becomes unvailable for any other reason (deleted by mistake or intentionally by an intruder), the traffic manager will become aware of this via the health probe and can automatically route traffic to the second instance with lower priority.&lt;/p&gt;
&lt;h2 id=&quot;solving-the-synchronisation-issue&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#solving-the-synchronisation-issue&quot; aria-label=&quot;solving the synchronisation issue permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Solving the synchronisation issue&lt;/h2&gt;
&lt;p&gt;The hardest part about doing DIY geo-redundancy yourself is setting up the synchronisation between multiple API Management instances. A company that goes through the effort of building a fully geo-redundancy infrastructure would be expected to following IaC (infrastructure-as-code) practices. There should be no manual changes done to APIs, products or policies within an API Management instance. Everything should be defined in code (terraform or similar). Management of users and subscriptions/api keys should also be done by an external micro-service, which needs to send the same request to multiple instances. For example, if a user “Adam” is created on API Management instance 1, the same user also needs to be created on instance 2. Error handling and logging is essencial for early detection of issues (what if instance 1 updates successfully, but instance 2 fails?).&lt;/p&gt;
&lt;h2 id=&quot;the-unintended-benefits-of-building-your-own-geo-redundancy&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#the-unintended-benefits-of-building-your-own-geo-redundancy&quot; aria-label=&quot;the unintended benefits of building your own geo redundancy permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;The unintended benefits of building your own geo-redundancy&lt;/h2&gt;
&lt;p&gt;Apart from cost savings, there are some unintended benefits of having separate instances fully under our control, rather than opting for a built-in geo-redundancy in Premium tier. Let’s say there are risky configuration changes about to go out into production environment. There’s always that possibility in cloud engineering… “What if things go wrong? Do I have a rollback strategy?” Having that backup API Management instance ready on-hand to pick up traffic should things go wrong is a significant safety asset that should not be underestimated.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Optimal VM for building code?]]></title><description><![CDATA[Every company runs into this challenge sooner or later - improve efficiency, lower build times, deploy faster. Azure offers VMs with varying CPU families. This article attempts to answer which one provides the best value for money.]]></description><link>https://blog.anton-it.dev/posts/optimal-vm-for-building-code</link><guid isPermaLink="false">https://blog.anton-it.dev/posts/optimal-vm-for-building-code</guid><pubDate>Thu, 27 Feb 2020 22:40:32 GMT</pubDate><content:encoded>&lt;p&gt;Every company runs into this challenge sooner or later. How to optimally build growing code base as efficiently as possible. Azure offers VMs in varying CPU families. This article attempts to answer which one provides the best value for money.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#the-test-setup&quot;&gt;The test setup&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#testing-methodology&quot;&gt;Testing methodology&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#results&quot;&gt;Results&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#conclusions&quot;&gt;Conclusions&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;the-test-setup&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#the-test-setup&quot; aria-label=&quot;the test setup permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;The test setup&lt;/h2&gt;
&lt;p&gt;The test will consist of 4 different configurations. Prices are approximate for West Europe Azure region at the time of writing this document.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;B2ms (2 vcores, burstable) - £52.23/month&lt;/li&gt;
&lt;li&gt;B4ms (4 vcores, burstable) – £104.46/month&lt;/li&gt;
&lt;li&gt;F4s_v2 (4 vcores, compute optimised) - £105.55/month&lt;/li&gt;
&lt;li&gt;D4s_v3 (4 vcores, general purpose) - £130.58/month&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;B-series&lt;/code&gt; are cost-efficient VMs suitable for workloads that don’t require high network/disk throughput. When they’re not fully utilised they will bank up CPU credits and utilise them later when needed. This makes them an attractive candidate for build agents (build up a credit bank overnight and utilise the computing resources during the day). More info on these VMs is &lt;a href=&quot;https://azure.microsoft.com/en-gb/blog/introducing-b-series-our-new-burstable-vm-size/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Fsv2-series&lt;/code&gt; VMs run on Intel Xeon Platinum CPUs with high clock speeds and performance in floating point operations. They come with lower memory allocation than burstable VMs, but this is not necessarily a problem for build agents. They are also priced very competitevly. More info on these bad boys &lt;a href=&quot;https://docs.microsoft.com/en-us/azure/virtual-machines/fsv2-series&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;is here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;D4s_v3&lt;/code&gt; are suitable for most general purpose workloads. They come with a higher memory allocation than F-series VMs. They are classed as a good all-around VMs making them an attractive default choice for users who are just trying things out. Optimisation tends to be an after-thought, which rarely materialises. More info on Dsv3 series &lt;a href=&quot;https://docs.microsoft.com/en-us/azure/virtual-machines/dv3-dsv3-series&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;testing-methodology&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#testing-methodology&quot; aria-label=&quot;testing methodology permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Testing methodology&lt;/h2&gt;
&lt;p&gt;The build process will run on a self-hosted Azure DevOps build agents in AKS (Azure Kubernetes Service). A separate worker node pool is created for each VM size as follows:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/0d5fcbaa50b84ae1ab5fc1e9cfbebb9c/6a361/build-times-k8s-pools.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 15.416666666666664%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAADABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAcWAsD//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAEFAn//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAY/An//xAAZEAABBQAAAAAAAAAAAAAAAAABABAxQXH/2gAIAQEAAT8hN6whf//aAAwDAQACAAMAAAAQgA//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAXEAEAAwAAAAAAAAAAAAAAAAAAATFB/9oACAEBAAE/EAyFL//Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/0d5fcbaa50b84ae1ab5fc1e9cfbebb9c/8ac56/build-times-k8s-pools.webp 240w,
/static/0d5fcbaa50b84ae1ab5fc1e9cfbebb9c/d3be9/build-times-k8s-pools.webp 480w,
/static/0d5fcbaa50b84ae1ab5fc1e9cfbebb9c/e46b2/build-times-k8s-pools.webp 960w,
/static/0d5fcbaa50b84ae1ab5fc1e9cfbebb9c/2d20a/build-times-k8s-pools.webp 1351w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/0d5fcbaa50b84ae1ab5fc1e9cfbebb9c/09b79/build-times-k8s-pools.jpg 240w,
/static/0d5fcbaa50b84ae1ab5fc1e9cfbebb9c/7cc5e/build-times-k8s-pools.jpg 480w,
/static/0d5fcbaa50b84ae1ab5fc1e9cfbebb9c/6a068/build-times-k8s-pools.jpg 960w,
/static/0d5fcbaa50b84ae1ab5fc1e9cfbebb9c/6a361/build-times-k8s-pools.jpg 1351w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/0d5fcbaa50b84ae1ab5fc1e9cfbebb9c/6a068/build-times-k8s-pools.jpg&quot;
          alt=&quot;build-times-k8s-pools.jpg&quot;
          title=&quot;build-times-k8s-pools.jpg&quot;
          loading=&quot;lazy&quot;
          style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;The resource requests and limits for Kubernetes pods hosting the build agents are set up as follows:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 152px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/612584a7a6b83d960e3953011e24956f/2f70b/build-times-k8s-limits.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 89.47368421052632%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAASABQDASIAAhEBAxEB/8QAGAABAQADAAAAAAAAAAAAAAAAAAIBBAX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB5BlIC7FCQF//xAAYEAACAwAAAAAAAAAAAAAAAAAAARARIP/aAAgBAQABBQJDhZo//8QAFREBAQAAAAAAAAAAAAAAAAAAEEH/2gAIAQMBAT8BKf/EABURAQEAAAAAAAAAAAAAAAAAABBB/9oACAECAQE/ASH/xAAUEAEAAAAAAAAAAAAAAAAAAAAw/9oACAEBAAY/Ah//xAAZEAEAAgMAAAAAAAAAAAAAAAABABEQMVH/2gAIAQEAAT8hybReYAvRKLlOE//aAAwDAQACAAMAAAAQj8j8/8QAFREBAQAAAAAAAAAAAAAAAAAAIEH/2gAIAQMBAT8Qof/EABURAQEAAAAAAAAAAAAAAAAAACBB/9oACAECAQE/EIH/xAAfEAEAAgEDBQAAAAAAAAAAAAABABEhMWGBEEFxscH/2gAIAQEAAT8Qo4Q2xBXYDTpSl8afZQjS72jlhwgcTAaL8RtfVP/Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/612584a7a6b83d960e3953011e24956f/4e7ec/build-times-k8s-limits.webp 152w&quot;
          sizes=&quot;(max-width: 152px) 100vw, 152px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/612584a7a6b83d960e3953011e24956f/2f70b/build-times-k8s-limits.jpg 152w&quot;
          sizes=&quot;(max-width: 152px) 100vw, 152px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/612584a7a6b83d960e3953011e24956f/2f70b/build-times-k8s-limits.jpg&quot;
          alt=&quot;build-times-k8s-limits.jpg&quot;
          title=&quot;build-times-k8s-limits.jpg&quot;
          loading=&quot;lazy&quot;
          style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt; I won’t go into details about the nature of the code being built or the steps in the build process to keep this short and focused. But it does involve the sort of stuff you’d normally expect: Restoring nuget packages, running “dotnet build”, unit testing and pushing the final image to ACR (Azure Container Registry).&lt;/p&gt;
&lt;h2 id=&quot;results&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#results&quot; aria-label=&quot;results permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Results&lt;/h2&gt;
&lt;p&gt;Each build run is executed twice. The first run is noticably longer due to docker images being pulled from the internet. These images are then cached for the 2nd run. I’ve also timed the compile time and overall build time separately to get a better indication how the CPU affects the compilation part of the process. &lt;/p&gt;
&lt;h3 id=&quot;b2ms&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#b2ms&quot; aria-label=&quot;b2ms permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;B2ms&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Overall build time: 15m 19s&lt;/li&gt;
&lt;li&gt;Compile task: 12m 47s&lt;/li&gt;
&lt;li&gt;CPU profile:
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 608px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/24dd20e00b75f4c348e074367343c226/640be/build-times-b2ms.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 107.08333333333333%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAVABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAIEBQP/xAAXAQEBAQEAAAAAAAAAAAAAAAAAAgED/9oADAMBAAIQAxAAAAHcjwqXGmomW4E9AP/EABsQAAMAAgMAAAAAAAAAAAAAAAABAhITITEy/9oACAEBAAEFAskjZJmivVdy+HEutMGmD//EABgRAAIDAAAAAAAAAAAAAAAAAAERABAS/9oACAEDAQE/AWXNG//EABYRAQEBAAAAAAAAAAAAAAAAAAAREv/aAAgBAgEBPwHLKq//xAAZEAABBQAAAAAAAAAAAAAAAAAQAAEgITH/2gAIAQEABj8CWhxcP//EAB0QAAIBBQEBAAAAAAAAAAAAAAABIRExYZGhQVH/2gAIAQEAAT8hbVG5Gi4z8OoeEnqDw3Wr+Mks9mB7P//aAAwDAQACAAMAAAAQZDA8/8QAGBEBAAMBAAAAAAAAAAAAAAAAAQAQETH/2gAIAQMBAT8QERMO1rP/xAAXEQADAQAAAAAAAAAAAAAAAAAAARFR/9oACAECAQE/EEjIK0rT/8QAHxAAAgICAQUAAAAAAAAAAAAAAREAITFRoUFhkcHR/9oACAEBAAE/EC1AM0YmYGUKNzuvKGx69IQmZDi4E0WCtVAruW0dJgcuO+qf/9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/24dd20e00b75f4c348e074367343c226/8ac56/build-times-b2ms.webp 240w,
/static/24dd20e00b75f4c348e074367343c226/d3be9/build-times-b2ms.webp 480w,
/static/24dd20e00b75f4c348e074367343c226/f5a85/build-times-b2ms.webp 608w&quot;
          sizes=&quot;(max-width: 608px) 100vw, 608px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/24dd20e00b75f4c348e074367343c226/09b79/build-times-b2ms.jpg 240w,
/static/24dd20e00b75f4c348e074367343c226/7cc5e/build-times-b2ms.jpg 480w,
/static/24dd20e00b75f4c348e074367343c226/640be/build-times-b2ms.jpg 608w&quot;
          sizes=&quot;(max-width: 608px) 100vw, 608px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/24dd20e00b75f4c348e074367343c226/640be/build-times-b2ms.jpg&quot;
          alt=&quot;build-times-b2ms.jpg&quot;
          title=&quot;build-times-b2ms.jpg&quot;
          loading=&quot;lazy&quot;
          style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;b4ms&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#b4ms&quot; aria-label=&quot;b4ms permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;B4ms&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Overall build time: 9m 27s&lt;/li&gt;
&lt;li&gt;Compile task: 8m 41s&lt;/li&gt;
&lt;li&gt;CPU profile:
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/90cee091c1d2e8e8607b3695f64e8960/d8f2d/build-times-b4ms.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 33.75%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAQL/2gAMAwEAAhADEAAAAdWCwE//xAAYEAADAQEAAAAAAAAAAAAAAAAAAQITEf/aAAgBAQABBQJ3XdGas//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAEDAQE/AYj/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAY/An//xAAXEAEBAQEAAAAAAAAAAAAAAAABACFR/9oACAEBAAE/ITILeOt//9oADAMBAAIAAwAAABAIH//EABgRAAIDAAAAAAAAAAAAAAAAAAABETFx/9oACAEDAQE/EFJWaP/EABcRAQEBAQAAAAAAAAAAAAAAAAEAURH/2gAIAQIBAT8QAy4Zf//EABoQAQADAAMAAAAAAAAAAAAAAAEAESExYXH/2gAIAQEAAT8QRjBzCJAt7aIg5D4T/9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/90cee091c1d2e8e8607b3695f64e8960/8ac56/build-times-b4ms.webp 240w,
/static/90cee091c1d2e8e8607b3695f64e8960/d3be9/build-times-b4ms.webp 480w,
/static/90cee091c1d2e8e8607b3695f64e8960/e46b2/build-times-b4ms.webp 960w,
/static/90cee091c1d2e8e8607b3695f64e8960/f992d/build-times-b4ms.webp 1440w,
/static/90cee091c1d2e8e8607b3695f64e8960/3afba/build-times-b4ms.webp 1756w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/90cee091c1d2e8e8607b3695f64e8960/09b79/build-times-b4ms.jpg 240w,
/static/90cee091c1d2e8e8607b3695f64e8960/7cc5e/build-times-b4ms.jpg 480w,
/static/90cee091c1d2e8e8607b3695f64e8960/6a068/build-times-b4ms.jpg 960w,
/static/90cee091c1d2e8e8607b3695f64e8960/644c5/build-times-b4ms.jpg 1440w,
/static/90cee091c1d2e8e8607b3695f64e8960/d8f2d/build-times-b4ms.jpg 1756w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/90cee091c1d2e8e8607b3695f64e8960/6a068/build-times-b4ms.jpg&quot;
          alt=&quot;build-times-b4ms.jpg&quot;
          title=&quot;build-times-b4ms.jpg&quot;
          loading=&quot;lazy&quot;
          style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;f4s_v2&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#f4s_v2&quot; aria-label=&quot;f4s_v2 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;F4s_v2&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Overall build time: 7m 28s&lt;/li&gt;
&lt;li&gt;Compile task: 6m 54s&lt;/li&gt;
&lt;li&gt;CPU profile:
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/36781945fb9b2baa8424a837e2aea4c9/e8305/build-times-f4s.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQCAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAv/aAAwDAQACEAMQAAAB2qpJXLgqH//EABoQAAICAwAAAAAAAAAAAAAAAAABAhMDEBL/2gAIAQEAAQUClLktLGZdI//EABYRAAMAAAAAAAAAAAAAAAAAAAABEf/aAAgBAwEBPwGMjP/EABcRAQADAAAAAAAAAAAAAAAAAAABESH/2gAIAQIBAT8BimP/xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAZEAADAQEBAAAAAAAAAAAAAAAAAREhMWH/2gAIAQEAAT8hdESK3Fh5I5REJh//2gAMAwEAAgADAAAAEMQ//8QAGBEAAgMAAAAAAAAAAAAAAAAAAAERIWH/2gAIAQMBAT8QkdM1P//EABcRAAMBAAAAAAAAAAAAAAAAAAABESH/2gAIAQIBAT8QSNIP/8QAHhAAAgIBBQEAAAAAAAAAAAAAAAERITFBUWGBobH/2gAIAQEAAT8QeIxO4092VJ51Op4H9IpibzYil1yf/9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/36781945fb9b2baa8424a837e2aea4c9/8ac56/build-times-f4s.webp 240w,
/static/36781945fb9b2baa8424a837e2aea4c9/d3be9/build-times-f4s.webp 480w,
/static/36781945fb9b2baa8424a837e2aea4c9/e46b2/build-times-f4s.webp 960w,
/static/36781945fb9b2baa8424a837e2aea4c9/983e9/build-times-f4s.webp 1049w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/36781945fb9b2baa8424a837e2aea4c9/09b79/build-times-f4s.jpg 240w,
/static/36781945fb9b2baa8424a837e2aea4c9/7cc5e/build-times-f4s.jpg 480w,
/static/36781945fb9b2baa8424a837e2aea4c9/6a068/build-times-f4s.jpg 960w,
/static/36781945fb9b2baa8424a837e2aea4c9/e8305/build-times-f4s.jpg 1049w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/36781945fb9b2baa8424a837e2aea4c9/6a068/build-times-f4s.jpg&quot;
          alt=&quot;build-times-f4s.jpg&quot;
          title=&quot;build-times-f4s.jpg&quot;
          loading=&quot;lazy&quot;
          style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;d4s_v3&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#d4s_v3&quot; aria-label=&quot;d4s_v3 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;D4s_v3&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Overall build time: 8m 41s&lt;/li&gt;
&lt;li&gt;Compile task: 8m 3s&lt;/li&gt;
&lt;li&gt;CPU profile:
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/9be1acad46be7f5b8a046277c3a0c3ab/e92da/build-times-d4s.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 37.083333333333336%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAMF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAgAB/9oADAMBAAIQAxAAAAHXkMht/8QAGBAAAwEBAAAAAAAAAAAAAAAAAQITABH/2gAIAQEAAQUCdyGoe1O//8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQMBAT8BiP/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAABD/2gAIAQEABj8Cf//EABcQAQEBAQAAAAAAAAAAAAAAAAEAETH/2gAIAQEAAT8hwRyHxCl//9oADAMBAAIAAwAAABB/3//EABgRAQEAAwAAAAAAAAAAAAAAAAEAESFh/9oACAEDAQE/EHRcz1f/xAAYEQEAAwEAAAAAAAAAAAAAAAABABExUf/aAAgBAgEBPxACslHJ/8QAGhABAAMAAwAAAAAAAAAAAAAAAQARQSFhcf/aAAgBAQABPxDq2wj2/GNEui0+E//Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/9be1acad46be7f5b8a046277c3a0c3ab/8ac56/build-times-d4s.webp 240w,
/static/9be1acad46be7f5b8a046277c3a0c3ab/d3be9/build-times-d4s.webp 480w,
/static/9be1acad46be7f5b8a046277c3a0c3ab/e46b2/build-times-d4s.webp 960w,
/static/9be1acad46be7f5b8a046277c3a0c3ab/f992d/build-times-d4s.webp 1440w,
/static/9be1acad46be7f5b8a046277c3a0c3ab/bd1ed/build-times-d4s.webp 1597w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/9be1acad46be7f5b8a046277c3a0c3ab/09b79/build-times-d4s.jpg 240w,
/static/9be1acad46be7f5b8a046277c3a0c3ab/7cc5e/build-times-d4s.jpg 480w,
/static/9be1acad46be7f5b8a046277c3a0c3ab/6a068/build-times-d4s.jpg 960w,
/static/9be1acad46be7f5b8a046277c3a0c3ab/644c5/build-times-d4s.jpg 1440w,
/static/9be1acad46be7f5b8a046277c3a0c3ab/e92da/build-times-d4s.jpg 1597w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/9be1acad46be7f5b8a046277c3a0c3ab/6a068/build-times-d4s.jpg&quot;
          alt=&quot;build-times-d4s.jpg&quot;
          title=&quot;build-times-d4s.jpg&quot;
          loading=&quot;lazy&quot;
          style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;memory-consumption-profile&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#memory-consumption-profile&quot; aria-label=&quot;memory consumption profile permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Memory consumption profile&lt;/h3&gt;
&lt;p&gt;The profile was very similar across all tested configurations. I’ve therefore only included a single graph. &lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/07c8041c832e87510f03d36e54ad736e/8b5c7/build-times-memory-allocation.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 57.08333333333333%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQBAwX/xAAWAQEBAQAAAAAAAAAAAAAAAAABAgP/2gAMAwEAAhADEAAAAduuFrzaFRP/xAAaEAABBQEAAAAAAAAAAAAAAAAAAQIDERMS/9oACAEBAAEFAnO5NFNFJSij/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAR/9oACAEDAQE/AVdtb//EABYRAQEBAAAAAAAAAAAAAAAAAAEAEf/aAAgBAgEBPwECwv/EABUQAQEAAAAAAAAAAAAAAAAAABAB/9oACAEBAAY/AmP/xAAbEAACAgMBAAAAAAAAAAAAAAAAARFhECGRgf/aAAgBAQABPyHUhLZQihYoX09dP//aAAwDAQACAAMAAAAQKM//xAAXEQADAQAAAAAAAAAAAAAAAAAAARFh/9oACAEDAQE/EFIRuf/EABYRAQEBAAAAAAAAAAAAAAAAAAEQIf/aAAgBAgEBPxBhsv/EAB0QAAEEAgMAAAAAAAAAAAAAAAEAESExENFhkfH/2gAIAQEAAT8QJIJWvaxQvci6LI3O889oAIB79r//2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;picture&gt;
        &lt;source
          srcset=&quot;/static/07c8041c832e87510f03d36e54ad736e/8ac56/build-times-memory-allocation.webp 240w,
/static/07c8041c832e87510f03d36e54ad736e/d3be9/build-times-memory-allocation.webp 480w,
/static/07c8041c832e87510f03d36e54ad736e/e46b2/build-times-memory-allocation.webp 960w,
/static/07c8041c832e87510f03d36e54ad736e/6a022/build-times-memory-allocation.webp 1038w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/webp&quot;
        /&gt;
        &lt;source
          srcset=&quot;/static/07c8041c832e87510f03d36e54ad736e/09b79/build-times-memory-allocation.jpg 240w,
/static/07c8041c832e87510f03d36e54ad736e/7cc5e/build-times-memory-allocation.jpg 480w,
/static/07c8041c832e87510f03d36e54ad736e/6a068/build-times-memory-allocation.jpg 960w,
/static/07c8041c832e87510f03d36e54ad736e/8b5c7/build-times-memory-allocation.jpg 1038w&quot;
          sizes=&quot;(max-width: 960px) 100vw, 960px&quot;
          type=&quot;image/jpeg&quot;
        /&gt;
        &lt;img
          class=&quot;gatsby-resp-image-image&quot;
          src=&quot;/static/07c8041c832e87510f03d36e54ad736e/6a068/build-times-memory-allocation.jpg&quot;
          alt=&quot;build-times-memory-allocation.jpg&quot;
          title=&quot;build-times-memory-allocation.jpg&quot;
          loading=&quot;lazy&quot;
          style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        /&gt;
      &lt;/picture&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;The profile suggests an AKS node needs between 1 – 2.5GB of memory to host a single build agent. B4ms and D4s_v3 both come with 16 GB of RAM, but 8GB is sufficient to host 2 agents on a single node. The additional RAM is therefore not utilised.&lt;/p&gt;
&lt;h3 id=&quot;disk-performance&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#disk-performance&quot; aria-label=&quot;disk performance permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Disk performance&lt;/h3&gt;
&lt;p&gt;All tests were done on nodes utilising a single 127GB premium disk (100MBps max throughput). I haven’t tested using a larger disk with higher throughput, because the throughput here will be limited by VM size. D4s&lt;em&gt;v3 and F4s&lt;/em&gt;v2 have a maximum throughput of 96MBps. &lt;/p&gt;
&lt;h2 id=&quot;conclusions&quot; style=&quot;position:relative;&quot;&gt;&lt;a href=&quot;#conclusions&quot; aria-label=&quot;conclusions permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Conclusions&lt;/h2&gt;
&lt;p&gt;The measured results suggest &lt;code class=&quot;language-text&quot;&gt;F4s_v2&lt;/code&gt; is the optimal SKU to achieve lowest build times/cost ratio. Hosting 2 agents on each node appears to be a balanced approach. F4s_v2 is also the lowest SKU that supports accelerated networking (you can read more about accelerated networking &lt;a href=&quot;https://azure.microsoft.com/en-gb/blog/maximize-your-vm-s-performance-with-accelerated-networking-now-generally-available-for-both-windows-and-linux/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;here&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;Utilising general-purpose D4s_v3 nodes provides similar peformance, but at significantly higher price due to the additional memory, which is not utilised.&lt;/p&gt;
&lt;p&gt;One may consider de-allocating VMs in out-of-office hours and starting them again first thing in the morning. However B-series VMs are not suitable for this, because they rely on banked CPU credits, which are lost when a VM is de-allocated. I would therefore recommend to either use Fs_v2 series VMs and automate the power-management or consider reserving the compute capacity for 3 years, providing significant cost saving. Any power management implementation will come with operational overheads and in both cases the cost savings are similar.&lt;/p&gt;</content:encoded></item></channel></rss>